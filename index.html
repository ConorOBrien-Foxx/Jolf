<!DOCTYPE html>
<html lang="en">
<head>
	<title>Jolf</title>
	<meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Jolf : A golfier prefix version of JavaScript">
	<link rel="stylesheet" href="bootstrap.css">
	<script src="utf8.js"></script>
	<script src="Jolf.js"></script>
	<script>
	// from tryitonline.net
	function load(){
		if(location.hash){
			var hash = location.hash.slice(1).split("&").map(function(r){
				r=r.split("=");
				if(r[0]=="code") document.getElementById("code").value = decode(r[1]);
				if(r[0]=="input") document.getElementById("input").value = decode(r[1]);
			});
		}
	}
	
	function save(){
		var a = document.getElementById("code").value;
		var b = document.getElementById("input").value;
		location.hash = "#"+
						[a?"code="+encode(a):"",
						b?"input="+encode(b):""].filter(function(x){return x}).join("&");
	}

	function encode(string) {
		return btoa(unescape(encodeURIComponent(string))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");
	}

	function decode(string) {
		return decodeURIComponent(escape(atob(unescape(string).replace(/-/g, "+").replace(/_/g, "/"))));
	}
	
	// end from tryitonline.net
	
	var progs = {
		"Hello World (1)": "\"Hello, World!",
		"Hello World (2)": "e.$nsp$`0\b4",
		"Adding two inputs": "+Jj"
	};
	
	var nsp = [];
	var keyz = Object.keys(progs);
	for(var i=0;i<keyz.length;i++){
		nsp.push(progs[keyz[i]]);
	}
	
	function run(ex){
		document.getElementById("code").value = progs[ex];
	}
	
	function onEdit(){
		document.getElementById("code").value = document.getElementById("code").value.replace(/\\b/g,"\b").replace(/\\n/g,"\n").replace(/\\t/g,"\t");
	}
	
	function addListeners(){
		document.getElementById("code").addEventListener("change",onEdit);
		onEdit();
		var qS = document.querySelectorAll("#openMenu + div#inner button");
		for(var i=0;i<qS.length;i++){
			qS[i].addEventListener("click",function(){
				document.getElementById("code").value = progs[this.innerHTML] || "XError: program not found";
			});
		}
		document.getElementById("save").addEventListener("click",save);
		document.getElementById("load").addEventListener("click",load);
		document.getElementById("openMenu").addEventListener("click",function(e){
			var inner = document.getElementById("inner");
			inner.style.height = inner.style.height!="auto"?"auto":"0px";
		});
		document.getElementById("run").addEventListener("click",function(){
			var x = evalJolf(document.getElementById("code").value);
		});
	}
	
	window.addEventListener("load",load);
	window.addEventListener("load",addListeners);
	</script>
	<link rel="STYLESHEET" href="Jolf.css">
</head>
<body>
<div id="container">
	<header>
		<h1 id="title">Jolf</h1>
		<button class="btn btn-success" id="save">save</button>
		<button class="btn btn-warning" id="load">load</button>
		<div id="menu">
			<button class="btn btn-info" id="openMenu">
				examples
			</button>
			<div id="inner">
				<ul>
					<li><button class="btn btn-info">Hello World (1)</button></li>
					<li><button class="btn btn-info">Hello World (2)</button></li>
					<li><button class="btn btn-info">Adding two inputs</button></li>
				</ul>
			</div>
		</div>
		<a href="explanation.html">explanation</a>
	</header>
	<p>Code</p>
	<textarea id="code" spellcheck="false"></textarea>
	<p>Input</p>
	<textarea id="input" spellcheck="false"></textarea>
	<button class="btn btn-block btn-primary sev" id="run">Run</button>
	<p>Output</p>
	<div id="output"></div>
	<div id="options"><h2>Options</h2><input type="checkbox" id="altInput"> Take input from input box?<br><input type="checkbox" id="winOut"> Window is output source?<br><input type="checkbox"> Safety mode?</div>
</div>
</body>
</html>
